<testcase>
<info>
<keywords>
HTTP
HTTP GET
cookies
shared cookies
delete old access cookies
</keywords>
</info>

# Server-side
<reply>
<data1>
HTTP/1.1 200 OK
Date: Thu, 09 Nov 2010 14:49:00 GMT
Server: test-server/fake
Content-Type: text/html
Set-Cookie: test1_1=one_one; domain=foo.com; path=/90020001
Content-Length: 5

run 1
</data1>
<data2>
HTTP/1.1 200 OK
Date: Thu, 09 Nov 2010 14:49:01 GMT
Server: test-server/fake
Content-Type: text/html
Set-Cookie: test2_1=two_one; domain=foo.com; path=/9002002
Set-Cookie: test2_2=two_two; domain=foo.com; path=/9002002
Content-Length: 5

run 2
</data2>
<data3>
HTTP/1.1 200 OK
Date: Thu, 09 Nov 2010 14:49:02 GMT
Server: test-server/fake
Content-Type: text/html
Funny-head: yesyes
Set-Cookie: test3_1=three_one;   domain=foo.com; path=/90020003
Set-Cookie: test3_2=three_two;   domain=foo.com; path=/90020003
Set-Cookie: test3_3=three_three; domain=foo.com; path=/90020003
Set-Cookie: test3_4=three_fore;  domain=foo.com; path=/90020003
Content-Type: text/html
Content-Length: 5

run 3
</data3>
</reply>

# Client-side
<client>
<server>
http
</server>
<name>
Delete old access cookies
</name>
# Explicitly set the time zone to a known good one, in case the user is
# using one of the 'right' zones that take into account leap seconds
# which causes the cookie expiry times to be different.
<setenv>
TZ=GMT
</setenv>
<tool>
lib9002
</tool>
<command>
http://%HOSTIP:%HTTPPORT/9002 -b none -c log/jar9002.txt
</command>
</client>

# Verify data after the test has been "shot"
<verify>
<protocol>
GET /90020001 HTTP/1.1
Accept: */*
Host: www.host.foo.com

GET /90020002 HTTP/1.1
Accept: */*
Host: www.host.foo.com

GET /90020001 HTTP/1.1
Accept: */*
Cookie: test1_1=one_one
Host: www.host.foo.com

GET /90020003 HTTP/1.1
Accept: */*
Host: www.host.foo.com

</protocol>
<file name="log/jar9002.txt" mode="text">
# Netscape HTTP Cookie File
# http://curl.haxx.se/docs/http-cookies.html
# This file was generated by libcurl! Edit at your own risk.

.foo.com	TRUE	/90020001	FALSE	0	test1_1	one_one
.foo.com	TRUE	/90020003	FALSE	0	test3_1	three_one
.foo.com	TRUE	/90020003	FALSE	0	test3_2	three_two
.foo.com	TRUE	/90020003	FALSE	0	test3_3	three_three
.foo.com	TRUE	/90020003	FALSE	0	test3_4	three_fore
</file>
</verify>
</testcase>
